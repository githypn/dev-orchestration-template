# 要件定義（Requirements）

## 目的

<!-- プロジェクトの目的を記載する -->

## スコープ

### 対象（本リポジトリで扱う）

<!-- 対象とする機能・作業を箇条書きで記載 -->

### 非対象（本リポジトリでは行わない）

<!-- 除外する機能・作業を箇条書きで記載 -->

## 用語

| 用語           | 定義                                                         |
| -------------- | ------------------------------------------------------------ |
| 正本（SSOT）   | Single Source of Truth。docs/ 配下の文書を唯一の信頼源とする |
| 受入条件（AC） | Issue/PR が完了と判断できる基準                              |

<!-- プロジェクト固有の用語を追加 -->

## 成功条件（ゴール）

- CI が品質ゲートとして機能し、失敗時はマージできない
- 仕様（requirements/policies/constraints/plan/ADR）が更新され、会話ログ依存が最小化される
<!-- プロジェクト固有の成功条件を追加 -->

## 機能要件（FR）

### FR-001 <!-- 機能名 -->

- 入力：
- 出力：
- 失敗時：
- 担当モジュール：

### FR-010 <!-- 機能名 -->

- 入力：
- 出力：
- 担当モジュール：

<!-- 必要に応じて追加 -->

## 非機能要件（NFR）

### NFR-001 再現性

- 設定、シード、データバージョン、コードバージョン（コミットSHA）を記録する
- 同一入力に対して同一出力が得られることをテストで担保する

### NFR-010 セキュリティ

- 秘密情報をコミットしない
- CI の policy_check で機械的に検査する

### NFR-020 保守性

- 重要ロジックは単体テストを必須とする
- 変更は 1PR で理解可能な粒度に分割する
- コードの識別子は英語、説明文・PR・Issue は日本語で記述する

### NFR-030 運用容易性

- ローカルで最小コマンドで実行できる
- 失敗時の復旧手順を runbook に記載する

## 受入条件（全PR共通）

| ID     | 条件                                                                    |
| ------ | ----------------------------------------------------------------------- |
| AC-001 | 変更は要件・ポリシー・計画のいずれかに整合する                          |
| AC-010 | 必要なテストが追加または更新されている                                  |
| AC-020 | CI（lint/type/test/policy_check）が成功している                         |
| AC-030 | 変更に応じて正本（docs）が更新されている                                |
| AC-040 | 検証手順と結果が PR 本文に記載されている                                |
| AC-050 | プロジェクト固有の制約に反する変更がない（例外は ADR に記載されている） |
